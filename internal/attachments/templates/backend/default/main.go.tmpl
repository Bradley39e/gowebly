package main

import (
	"embed"
	"log/slog"
	"net/http"
	"os"

	gowebly "github.com/gowebly/helpers"
)

//go:embed static/*
var static embed.FS

func main() {
	// Create the gowebly helper for serve embed static folder.
	staticFileServer := gowebly.StaticFileServerHandler(http.FS(static))

	// Handle static files (with a custom handler).
	http.Handle("/static/", staticFileServer)

	// Handle index page view.
	http.HandleFunc("/", indexViewHandler)

	// Run your server.
	if err := runServer(); err != nil {
		slog.Error("run server", "details", err.Error())
		os.Exit(1)
	}
}
