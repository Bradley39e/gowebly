package main

import (
	"embed"
	"log/slog"
	"net/http"
	"os"

	_ "github.com/joho/godotenv/autoload"           // autoload environment variables
	gowebly "github.com/gowebly/gowebly/pkg/static" // helper for serve embed static folder
)

//go:embed static/*
var static embed.FS

func main() {
	// Handle static files (with a custom handler).
	http.Handle("/static/", gowebly.StaticFileServerHandler(http.FS(static)))

	// Handle views.
	http.HandleFunc("/", indexViewHandler)

	// Run your server.
	if err := runServer(); err != nil {
		slog.Error("msg", err.Error())
		os.Exit(1)
	}
}
